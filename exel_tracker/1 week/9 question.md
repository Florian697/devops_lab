# Как работает сеть между контейнерами?

Сеть между контейнерами в Docker (и других системах контейнеризации) позволяет контейнерам обмениваться данными, подключаться друг к другу и взаимодействовать в пределах одного или нескольких хостов. В Docker существуют несколько механизмов для настройки сетевого взаимодействия между контейнерами:

# 1. Мостовая сеть (Bridge Network)
Когда контейнеры запускаются без явного указания сети, Docker по умолчанию создает мостовую сеть, которая соединяет контейнеры на одном хосте. В рамках этой сети контейнеры могут общаться друг с другом по IP-адресам, назначенным на основе их сетевого интерфейса.

- Как это работает:

  - Все контейнеры, подключенные к мостовой сети, могут видеть друг друга по IP-адресам.

  - Docker создает виртуальный мост (bridge) на хосте, который действует как свитч для всех контейнеров в этой сети.

  - Контейнеры могут использовать имена хостов или IP-адреса для связи друг с другом.

Пример:

```
docker network create --driver bridge my_network
docker run --network my_network --name container1 my_image
docker run --network my_network --name container2 my_image
```

# 2. Хостовая сеть (Host Network)
При использовании хостовой сети контейнер использует сетевой стек хоста, то есть контейнер и хост работают в одной сети, и контейнеры не получают собственного IP-адреса, а используют IP-адрес хоста.

- Как это работает:

  - Контейнеры, подключенные к хостовой сети, могут напрямую общаться с хостом и другими контейнерами через сетевые интерфейсы хоста.

Пример:

```
docker run --network host --name container1 my_image
```

# 3. Сетевые мосты для нескольких хостов (Overlay Network)
Когда контейнеры находятся на разных хостах (например, в Kubernetes или Docker Swarm), Docker использует оверлейные сети для обеспечения связи между контейнерами, размещенными на разных физических или виртуальных машинах.

- Как это работает:

  - Docker создает виртуальную сеть, которая соединяет контейнеры на разных хостах.

  - Для этого используется механизм туннелирования, который обеспечивает передачу данных между хостами через зашифрованные каналы.

Пример:

```
docker network create --driver overlay my_overlay_network

```

# 4. Сетевой режим "None"
Сетевой режим "None" означает, что контейнер не подключается к какой-либо сети и не имеет сетевого стека. Это используется, когда контейнеру не нужно взаимодействовать с другими контейнерами или хостом.

- Как это работает:

  - Контейнер не будет иметь сетевого подключения и не сможет общаться с другими контейнерами или сетью хоста.

Пример:

```
docker run --network none --name container1 my_image
```

# 5. Сетевые алиасы и имена хостов
Контейнеры, подключенные к одной сети, могут использовать друг друга по имени. Docker автоматически создает DNS-сервис для контейнеров в одной сети. Контейнеры могут обращаться друг к другу по имени (например, container1, container2), и Docker будет автоматически разрешать эти имена в IP-адреса контейнеров.

# 6. Port Mapping (Проброс портов)
Когда контейнеры запускаются с пробросом портов, это позволяет контейнеру внутри сети быть доступным снаружи хоста. Проброс портов используется для предоставления доступа к сервисам контейнера извне, например, веб-серверу.

Пример:

```
docker run -p 8080:80 --name container1 my_image
```

Здесь контейнер будет доступен на порту 8080 хоста.