#python:3.11-slim - это официальный образ Python версии 3.11 на основе минималистичной операционной системы Debian.
FROM python:3.11-slim

#Устанавливает рабочую директорию внутри контейнера. Все последующие команды будут выполняться в этой директории.
#Если директория /app еще не существует, Docker создаст ее автоматически.
WORKDIR /app

#Копирует файл requirements.txt из вашего локального проекта в рабочую директорию контейнера.
#Точка (.) в конце пути указывает на текущую рабочую директорию внутри контейнера, то есть /app
COPY requirements.txt .

#Эта команда выполняет установку зависимостей из файла requirements.txt с помощью pip.
#--no-cache-dir — параметр, который предотвращает сохранение кеша в процессе установки.
#Это помогает уменьшить размер итогового образа, так как файлы кеша не сохраняются.
RUN pip install --no-cache-dir -r requirements.txt

#Копирует все файлы из текущей директории на вашем компьютере (где находится Dockerfile) в рабочую директорию контейнера (/app).
COPY . .

#Эта команда запускает сервер Uvicorn, который будет запускать ваше приложение FastAPI.
#"uvicorn" — это ASGI сервер, который используется для запуска приложений на FastAPI.
#"main:app" — это путь к приложению FastAPI, где main — это имя Python-файла (без расширения .py), а app — это объект FastAPI внутри этого файла.
#--host "0.0.0.0" — это параметр, который позволяет серверу слушать на всех интерфейсах, то есть доступным для внешнего мира.
#--port "8000" — параметр, который указывает, на каком порту будет работать приложение (в данном случае — 8000).
CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000"]
